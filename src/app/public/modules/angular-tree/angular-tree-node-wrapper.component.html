<div
  class="node-wrapper"
  [class.sky-angular-tree-node-active]="getActiveClass()"
  [class.sky-angular-tree-node-selected]="getSelectedClass()"
  [style.padding-left]="node.getNodePadding()"
>

  <!-- Expander -->
  <tree-node-expander
    [node]="node"
  >
  </tree-node-expander>

  <!-- Checkbox -->
  <sky-checkbox *ngIf="showCheckbox()"
    [checked]="isSelected"
    [id]="node.data.id"
    [label]="node.data.name"
    [ngClass]="{ 'sky-checkbox-indeterminate': isPartiallySelected }"
    (change)="onCheckboxChange(node, $event)"
  >
  </sky-checkbox>

  <!-- Context Menu -->
  <ng-content select="sky-angular-tree-context-menu"></ng-content>

  <!-- Note: we've made changes to the click event, tabindex, and classes when compared to the original template. -->
  <!-- https://github.com/500tech/angular-tree-component/blob/master/lib/components/tree-node-wrapper.component.ts -->
  <div
    class="node-content-wrapper"
    [attr.tabindex]="tabIndex"
    [allowDragoverStyling]="node.allowDragoverStyling()"
    [treeAllowDrop]="node.allowDrop"
    [treeDrag]="node"
    [treeDragEnabled]="node.allowDrag()"
    (click)="onNodeContentClick(node, $event)"
    (contextmenu)="node.mouseAction('contextMenu', $event)"
    (dblclick)="node.mouseAction('dblClick', $event)"
    (focus)="onFocus($event)"
    (treeDrop)="node.onDrop($event)"
    (treeDropDragEnter)="node.mouseAction('dragEnter', $event)"
    (treeDropDragLeave)="node.mouseAction('dragLeave', $event)"
    (treeDropDragOver)="node.mouseAction('dragOver', $event)"
    #nodeContentWrapper
  >
    <tree-node-content
      [index]="index"
      [node]="node"
      [template]="templates?.treeNodeTemplate"
    >
    </tree-node-content>
  </div>
</div>

<ng-container
  [ngTemplateOutlet]="templates?.treeNodeWrapperTemplate"
  [ngTemplateOutletContext]="{ $implicit: node, node: node, index: index, templates: templates }">
</ng-container>
